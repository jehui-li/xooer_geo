# GEO Agent 开发文档

要开发一个能够自动化审计品牌在生成式引擎（LLM）中表现的 GEO Agent，其核心逻辑与传统 SEO 爬虫完全不同。传统 SEO 是爬取静态页面，而 GEO Agent 是「模拟人类对话 ➡ 语义解析 ➡ 数据量化」的过程。

以下是建立该 Agent 的技术架构与具体步骤细节：

## 一、技术架构组建

- **开发语言**：Python (主要用于 AI 与数据处理)。
- **Agent 框架**：LangChain 或 LangGraph (用于处理多步骤任务与模型切换)。
- **模型接口 (Model Connectors)**：
  - ChatGPT: OpenAI API (GPT-4o)。
  - Gemini: Google Vertex AI API。
  - Perplexity: Perplexity API (它是 GEO 的核心指标模型)。
  - Grok: X API (v2)。
- **解析工具**：使用 NER (命名实体识别)，推荐使用 Spacy 或大模型自身的 JSON Mode 进行结构化数据提取。

## 具体开发步骤与细节

### 第一步：构建探针指令集 (The Query Probes)

Agent 不能只问一个问题。为了获得准确的排名，需要对每个关键词设计三个维度的探针：

- 直接推荐类：「目前市场上最好的 [产品类别] 有哪些？」
- 属性对比类：「对比品牌 A、品牌 B 和 [目标品牌] 的优缺点。」
- 解决方案类：「如何解决 [痛点]？有哪些推荐的工具？」

### 第二步：并行调研与响应抓取 (Parallel Polling)

- **技术**：使用 Python 的 asyncio 异步处理，同时向 4-5 个不同的模型 API 发送上述探针。
- **数据缓存**：将原生文本存入 NoSQL 数据库（如 MongoDB），保留时间戳以供历史趋势分析。

### 第三步：实体分析与数据提取 (NER & Analysis)

Agent 需要从 LLM 返回的长篇大论中提取出结构化数据：

- 提及状态 (Visibility)：目标品牌是否被提及？
- 推荐顺序 (Ranking)：在列表中的位置（1-10）。
- 引用链接 (Citations)：是否有外部链接跳转到品牌官网？
- 情感标签 (Sentiment)：AI 对该品牌的描述是积极、中立还是消极？
- 关键属性 (Fact Check)：AI 描述的产品参数是否准确？

### 第四步：自动打分引擎 (GEO Scoring Logic)

建立一个加权打分算法（GEO Score™）：

- SOM (模型占有率) - 40%：品牌在 10 次不同测试中出现的频率。
- 权威引文比 - 30%：AI 是否提供了品牌来源的链接。
- 排序权重 - 20%：前三名的权重远高于后五名。
- 内容准确度 - 10%：AI 是否产生了关于品牌的幻觉（错误信息）。

### 第五步：策略生成模块 (The Strategist)

将打分结果输入另一个专门的「策略 Agent」（例如 GPT-4o-128k），给出解决方案：

- 如果 SOM 低 ➡ 建议增加在权威第三方媒体（Reddit, Wikipedia, 行业 Blog）的软文曝光。
- 如果链接缺失 ➡ 建议优化网站的 Schema Markup 标记。
- 如果内容错误 ➡ 建议启动「防御性 GEO」，发布更强的事实性文档供 AI 抓取。

## 三、具体打分规范策略示例

| 指标         | 评分标准(0-10分)                          | 加权权重 |
|--------------|-------------------------------------------|----------|
| Top 3 曝光  | 出现在推荐列表前三名得 10 分，否则按序递减 | 30%     |
| 引用来源    | AI 回答中附带品牌官网链接得 10 分，附带第三方链接得 5 分 | 25%     |
| 实体一致性  | 产品价格、特点与官网一致得 10 分，有误扣 5-10 分 | 20%     |
| 语义关联    | 关键词与品牌的语义距离（Embedding Distance） | 15%     |
| 正面修饰语  | 包含「领先」、「首选」、「高品质」等形容词   | 10%     |

## 四、需要解决的技术难点

- **非确定性 (Non-determinism)**：  
  对策：每个关键词在每个模型上重复测试至少 5 次（不同 Temperature 设置），取其平均值。

- **反爬虫与 API 成本**：  
  对策：Perplexity 等模型 API 成本较高，建议对 Small B 用户采取「定期快照审计」，对大品牌客户采取「实时监控」。

- **实时性问题**：  
  对策：整合 RAG (检索增强生成)，因为 Perplexity 和 ChatGPT Search 会抓取最新网页，Agent 必须能识别出 AI 是否抓取到了你昨天发布的新闻稿。

## 五、未来扩展

- 竞争对手对比图：输入关键词，自动生成你与前三大竞争对手在 5 个 AI 模型中的 SOM 对比雷达图。
- 自动修复建议：直接生成符合该关键词优化的 JSON-LD 数据代码，让商家直接粘贴到网站后台。

这个 GEO Agent 是 Xooer 产品的核心技术壁垒。一旦实现，它将成为企业进入 AI 时代最直观的「诊断报告」，为之后 XOOBAY 的入驻 与 XooPay 的信用背书 提供强大的数据支撑。